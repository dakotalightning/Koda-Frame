/*! Dakota - React - v1.0 - 2014-12-24 */
!function(){function a(){var a,b,c;a="string"==typeof this.options.content?this.options.content:this.options.content.innerHTML,c=document.createDocumentFragment(),this.modal=document.createElement("div"),this.modal.className="scotch-modal "+this.options.className,this.modal.style.minWidth=this.options.minWidth+"px",this.modal.style.maxWidth=this.options.maxWidth+"px",this.options.closeButton===!0&&(this.closeButton=document.createElement("button"),this.closeButton.className="scotch-close close-button",this.closeButton.innerHTML="Ã—",this.modal.appendChild(this.closeButton)),this.options.overlay===!0&&(this.overlay=document.createElement("div"),this.overlay.className="scotch-overlay "+this.options.classname,c.appendChild(this.overlay)),b=document.createElement("div"),b.className="scotch-content",b.innerHTML=a,this.modal.appendChild(b),c.appendChild(this.modal),document.body.appendChild(c)}function b(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function c(){this.closeButton&&this.closeButton.addEventListener("click",this.close.bind(this)),this.overlay&&this.overlay.addEventListener("click",this.close.bind(this))}function d(){var a=document.createElement("div");return a.style.WebkitTransition?"webkitTransitionEnd":a.style.OTransition?"oTransitionEnd":"transitionend"}this.Modal=function(){this.closeButton=null,this.modal=null,this.overlay=null,this.transitionEnd=d();var a={autoOpen:!1,className:"fade-and-drop",closeButton:!0,content:"",maxWidth:600,minWidth:280,overlay:!0};arguments[0]&&"object"==typeof arguments[0]&&(this.options=b(a,arguments[0])),this.options.autoOpen===!0&&this.open()},Modal.prototype.open=function(){a.call(this),c.call(this),window.getComputedStyle(this.modal).height,this.modal.className=this.modal.className+(this.modal.offsetHeight>window.innerHeight?" scotch-open scotch-anchored":" scotch-open"),this.overlay.className=this.overlay.className+" scotch-open"},Modal.prototype.close=function(){var a=this;this.modal.className=this.modal.className.replace(" scotch-open",""),this.overlay.className=this.overlay.className.replace(" scotch-open",""),this.modal.addEventListener(this.transitionEnd,function(){a.modal.parentNode.removeChild(a.modal)}),this.overlay.addEventListener(this.transitionEnd,function(){a.overlay.parentNode&&a.overlay.parentNode.removeChild(a.overlay)})}}();var stop=!1,call,CommentBox=React.createClass({displayName:"CommentBox",render:function(){return React.createElement("div",{className:"commentBox"},React.createElement("h1",null,"Comments"),React.createElement(CommentList,null),React.createElement(CommentForm,null))}}),CommentBox=React.createClass({displayName:"CommentBox",loadCommentsFromServer:function(){console.debug("load Comments From Server"),stop?(console.debug("there is an error - cancel call"),clearInterval(call)):$.ajax({url:this.props.url,dataType:"json",success:function(a){this.setState({data:a})}.bind(this),error:function(a,b,c){stop=!0,console.error(this.props.url,b,c.toString())}.bind(this)})},getInitialState:function(){return{data:[]}},componentDidMount:function(){this.loadCommentsFromServer(),call=setInterval(this.loadCommentsFromServer,this.props.pollInterval)},render:function(){return React.createElement("div",{className:"commentBox"},React.createElement("h1",null,"Comments"),React.createElement(CommentList,{data:this.state.data}),React.createElement(CommentForm,null))}}),CommentList=React.createClass({displayName:"CommentList",render:function(){var a=this.props.data.map(function(a){return React.createElement(Comment,{author:a.author},a.text)});return React.createElement("div",{className:"commentList"},a)}}),CommentForm=React.createClass({displayName:"CommentForm",render:function(){return React.createElement("form",{className:"commentForm"},React.createElement("input",{type:"text",placeholder:"Your name"}),React.createElement("input",{type:"text",placeholder:"Say something..."}),React.createElement("input",{type:"submit",value:"Post"}))}}),converter=new Showdown.converter,Comment=React.createClass({displayName:"Comment",render:function(){var a=converter.makeHtml(this.props.children.toString());return React.createElement("div",{className:"comment"},React.createElement("h2",{className:"commentAuthor"},this.props.author),React.createElement("span",{dangerouslySetInnerHTML:{__html:a}}))}});React.render(React.createElement(CommentBox,{url:"comments.json",pollInterval:2e3}),document.getElementById("content"));